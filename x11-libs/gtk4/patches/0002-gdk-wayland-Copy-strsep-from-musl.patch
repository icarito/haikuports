From f92c41222fd5459a6c2e387753c7a85b76e8a6a5 Mon Sep 17 00:00:00 2001
From: Emmanuel Gil Peyrot <linkmauve@linkmauve.fr>
Date: Mon, 3 Feb 2025 17:21:32 +0000
Subject: [PATCH 2/2] gdk/wayland: Copy strsep() from musl
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This function comes from libbsd on Haiku, which we otherwise donâ€™t need.
---
 gdk/wayland/wm-button-layout-translation.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/gdk/wayland/wm-button-layout-translation.c b/gdk/wayland/wm-button-layout-translation.c
index 64ff93e..3bf6c63 100644
--- a/gdk/wayland/wm-button-layout-translation.c
+++ b/gdk/wayland/wm-button-layout-translation.c
@@ -24,6 +24,18 @@
 
 #include "wm-button-layout-translation.h"
 
+char *
+strsep(char **str, const char *sep)
+{
+  char *s = *str, *end;
+  if (!s) return NULL;
+  end = s + strcspn(s, sep);
+  if (*end) *end++ = 0;
+  else end = 0;
+  *str = end;
+  return s;
+}
+
 static void
 translate_buttons (char *layout, int *len_p)
 {
-- 
2.45.2

